<div class="content-wrapper">
  <app-student-search (eventSearch)="search($event)"></app-student-search>
  <div class="row">
    <div class="col-lg-12 grid-margin stretch-card">
      <div class="card">
        <div class="card-body">
          <h3 class="card-title">{{'table.title.student'|transloco}}</h3>
          <table class="table table-hover">
            <thead>
            <tr>
              <th style="width: 10px;">{{'table.number'|transloco}}</th>
              <th>{{'table.student.code'|transloco}}</th>
              <th>{{'table.name'|transloco}}</th>
              <th>{{'table.student.class'|transloco}}</th>
              <th>{{'table.student.course'|transloco}}</th>
              <th>{{'table.student.unit'|transloco}}</th>
              <th>{{'table.phone'|transloco}}</th>
              <th style="width: 15px;">{{'table.action'|transloco}}</th>
            </tr>
            </thead>
            <tbody>
            <tr *ngFor="let st of students, index as i">
              <td>{{i+1}}</td>
              <td>{{st.code}}</td>
              <td>{{st.fullName}}</td>
              <td>{{st.className}}</td>
              <td>{{st.courseName}}</td>
              <td>{{st.unitName}}</td>
              <td>{{st.phoneNumber}}</td>
              <td ngbDropdown container="body">
                <div class="dropdown">
                  <button class="btn btn-sm btn-primary dropdown-toggle" type="button" [id]="'ddBtn'+st.id"
                          data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">{{'button.action'|transloco}}</button>
                  <div class="dropdown-menu" aria-labelledby="{{'ddBtn'+st.id}}">
                    <h6 class="dropdown-header">{{'label.status'|transloco}}: {{st.statusName}}</h6>
                    <div class="dropdown-divider"></div>
                    <a class="dropdown-item btn btn-sm" (click)="studentInfo(st)">{{'button.student.info'|transloco}}</a>
                    <a class="dropdown-item btn btn-sm" (click)="score(st)">{{'button.student.score'|transloco}}</a>
                    <a class="dropdown-item btn btn-sm">{{'button.student.leave_study'|transloco}}</a>
                    <a class="dropdown-item btn btn-sm" (click)="openModalDelete(deleteModal, st)">{{'button.delete'|transloco}}</a>
                  </div>
                </div>
              </td>
            </tr>
            </tbody>
          </table>
          <div *ngIf="students==null||students.length==0">
            <h6 style="color: red;">{{'error.empty_list_data'|transloco}}</h6>
          </div>
          <ngb-pagination [collectionSize]="collectionSize" [(page)]="page" [maxSize]="maxSize"
                          [rotate]="true" [ellipses]="false" [boundaryLinks]="true"
                          [pageSize]="pageSize" (pageChange)="pageChange()"></ngb-pagination>
        </div>
      </div>
    </div>
  </div>
</div>

<ng-template #deleteModal let-modal>
  <div class="modal-header">
    <h4 class="modal-title">{{'label.notification'|transloco}}</h4>
  </div>
  <div class="modal-body">
    {{'message.delete'|transloco}}
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-sm btn-secondary" (click)="modal.dismiss()">{{'button.cancel'|transloco}}</button>
    <button type="button" class="btn btn-sm btn-danger" (click)="deleteById()">{{'button.delete'|transloco}}</button>
  </div>
</ng-template>
